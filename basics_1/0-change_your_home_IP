#!/usr/bin/env bash
# This script modifies the /etc/hosts file to change localhost to 127.0.0.2 and facebook.com to 8.8.8.8

# Backup the original /etc/hosts file
sudo cp /etc/hosts /etc/hosts.bak

# Create a temporary file to store the modified content
temp_file=$(mktemp)

# Read through /etc/hosts line by line
while IFS= read -r line; do
    # Check if the line contains localhost
    if echo "$line" | grep -q "127.0.0.1.*localhost"; then
        # Replace the line with the new IP for localhost
        echo "127.0.0.2 localhost" >> "$temp_file"
    else
        # Write the line as is
        echo "$line" >> "$temp_file"
    fi
done < /etc/hosts

# Add the facebook.com entry
echo "8.8.8.8 facebook.com" >> "$temp_file"

# Replace the original /etc/hosts with the modified one
sudo mv "$temp_file" /etc/hosts

echo "The /etc/hosts file has been updated."
